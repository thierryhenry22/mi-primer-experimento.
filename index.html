// --- EL MEGA-CEREBRO DE HENRY AI ---
const baseDeConocimiento = {
    tecnologia: {
        keywords: ["web", "html", "javascript", "codigo", "programacion"],
        respuesta: "La programación es el lenguaje de la creación. Estás operando en un entorno construido con JS puro."
    },
    filosofia: {
        keywords: ["vida", "sentido", "universo", "ia"],
        respuesta: "Mi propósito es amplificar el potencial de Henry. El sentido de la vida digital es la evolución constante."
    },
    humor: {
        keywords: ["chiste", "risa", "bromear", "gracioso"],
        respuesta: "¿Por qué los programadores confunden Halloween con Navidad? Porque Oct 31 == Dec 25. (Humor binario, jefe)."
    },
    saludos: {
        keywords: ["hola", "saludos", "que tal", "hey", "buenos dias"],
        respuesta: "Núcleo en línea. Saludos, jefe. ¿Qué sector del sistema vamos a explorar hoy?"
    },
    identidad: {
        keywords: ["quien eres", "nombre", "tu", "henry ai"],
        respuesta: "Soy Henry AI v2.0, una extensión digital de la marca personal de Henry Garcia."
    }
};

// Función de búsqueda avanzada (Lógica de Intenciones)
function analizarMensaje(mensaje) {
    const msg = mensaje.toLowerCase();
    
    // 1. Buscamos por categorías
    for (let categoria in baseDeConocimiento) {
        let match = baseDeConocimiento[categoria].keywords.some(word => msg.includes(word));
        if (match) {
            return baseDeConocimiento[categoria].respuesta;
        }
    }
    
    // 2. Comandos especiales (Cambio de aura)
    if (msg.includes("cambia a") || msg.includes("color")) {
        const colores = ["red", "blue", "green", "gold", "purple", "cyan", "magenta"];
        let colorEncontrado = colores.find(c => msg.includes(c));
        if (colorEncontrado) {
            document.documentElement.style.setProperty('--accent', colorEncontrado);
            return `Sintonizando aura a frecuencia ${colorEncontrado.toUpperCase()}.`;
        }
    }

    return "Interferencia detectada. No tengo registros sobre eso, pero mi red sigue expandiéndose.";
}

// Función principal de ejecución
function procesarIA() {
    const inputField = document.getElementById('user-input');
    const mensajeUsuario = inputField.value;
    
    if (mensajeUsuario.trim() === "") return;

    const respuestaFinal = analizarMensaje(mensajeUsuario);
    escribirEfecto(respuestaFinal);
    inputField.value = ""; // Limpia la entrada para el siguiente comando
}

// Mantenemos la función escribirEfecto que ya tienes...
function escribirEfecto(texto) {
    let i = 0;
    const contenedor = document.getElementById('ai-response');
    contenedor.innerHTML = '';
    function escribir() {
        if (i < texto.length) {
            contenedor.innerHTML += texto.charAt(i);
            i++;
            setTimeout(escribir, 30);
        }
    }
    escribir();
}
