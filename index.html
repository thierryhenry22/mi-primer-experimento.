<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Motorcycle Hill Rider</title>
    <style>
        body { margin: 0; background: #0f172a; overflow: hidden; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; left: 20px; color: white; font-size: 24px; pointer-events: none; }
        canvas { display: block; background: linear-gradient(#0ea5e9, #38bdf8); }
        .controls { position: absolute; bottom: 20px; width: 100%; text-align: center; color: white; opacity: 0.7; }
    </style>
</head>
<body>

    <div id="ui">Distancia: <span id="dist">0</span>m</div>
    <div class="controls">Usa Flecha ARRIBA para Acelerar | IZQ/DER para Inclinar</div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const distElement = document.getElementById("dist");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // --- CONFIGURACIÓN ---
        let bike = {
            x: 100,
            y: 0,
            vY: 0,
            rot: 0,
            vRot: 0,
            speed: 0
        };

        let terrain = [];
        let offset = 0;
        const gravity = 0.15;

        // Generar terreno inicial usando ondas seno
        for (let i = 0; i < 2000; i++) {
            terrain.push(Math.sin(i * 0.05) * 50 + Math.sin(i * 0.01) * 100 + canvas.height / 1.5);
        }

        // --- CONTROLES ---
        let keys = {};
        window.onkeydown = (e) => keys[e.key] = true;
        window.onkeyup = (e) => keys[e.key] = false;

        function update() {
            // Acelerar
            if (keys["ArrowUp"]) bike.speed += 0.2;
            else bike.speed *= 0.98; // Fricción
            
            if (bike.speed > 8) bike.speed = 8;

            // Inclinación
            if (keys["ArrowLeft"]) bike.vRot -= 0.01;
            if (keys["ArrowRight"]) bike.vRot += 0.01;

            offset += bike.speed;
            
            // Física de la moto
            let currentX = Math.floor(bike.x + offset);
            let groundY = terrain[currentX % terrain.length];

            if (bike.y < groundY - 20) {
                bike.vY += gravity; // Caída libre
            } else {
                // Al tocar el suelo, seguir la pendiente
                let nextY = terrain[(currentX + 1) % terrain.length];
                let angle = Math.atan2(nextY - groundY, 1);
                
                bike.y = groundY - 20;
                bike.vY = 0;
                
                // Alineación automática con el suelo
                bike.rot += (angle - bike.rot) * 0.1;
            }

            bike.y += bike.vY;
            bike.rot += bike.vRot;
            bike.vRot *= 0.9; // Fricción de rotación

            // Actualizar UI
            distElement.innerText = Math.floor(offset / 10);

            // Perder si se voltea demasiado
            if (Math.abs(bike.rot) > Math.PI / 1.5) {
                alert("¡Te accidentaste! Distancia: " + Math.floor(offset/10) + "m");
                location.reload();
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Dibujar Terreno
            ctx.fillStyle = "#16a34a";
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            for (let i = 0; i < canvas.width; i++) {
                ctx.lineTo(i, terrain[Math.floor(i + offset) % terrain.length]);
            }
            ctx.lineTo(canvas.width, canvas.height);
            ctx.fill();

            // Dibujar Moto (Representada por un cuerpo y dos ruedas)
            ctx.save();
            ctx.translate(bike.x, bike.y);
            ctx.rotate(bike.rot);

            // Cuerpo de la moto (Color Pro)
            ctx.fillStyle = "#8b5cf6";
            ctx.fillRect(-20, -10, 40, 10);
            ctx.fillStyle = "white"; // Casco/Piloto
            ctx.fillRect(-5, -25, 15, 15);

            // Ruedas
            ctx.fillStyle = "#333";
            ctx.beginPath(); ctx.arc(-15, 5, 8, 0, Math.PI * 2); ctx.fill();
            ctx.beginPath(); ctx.arc(15, 5, 8, 0, Math.PI * 2); ctx.fill();

            ctx.restore();
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
