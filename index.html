<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Rider - Snow Edition Pro</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; }
        #ui { 
            position: absolute; top: 30px; width: 100%; text-align: center; 
            color: #06b6d4; font-size: 2.5rem; font-weight: bold;
            text-shadow: 0 0 20px #06b6d4; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="ui">VELOCIDAD: <span id="speed">0</span> KM/H</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- ESCENA Y RENDER ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050505);
        scene.fog = new THREE.Fog(0x050505, 15, 60);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        // --- LUCES ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
        scene.add(ambientLight);
        const sunLight = new THREE.DirectionalLight(0xffffff, 0.8);
        sunLight.position.set(5, 10, 7);
        scene.add(sunLight);

        // --- CARRETERA ---
        const roadGeo = new THREE.PlaneGeometry(10, 1000);
        const roadMat = new THREE.MeshPhongMaterial({ color: 0x222222 });
        const road = new THREE.Mesh(roadGeo, roadMat);
        road.rotation.x = -Math.PI / 2;
        scene.add(road);

        // Línea central de la carretera
        const lineGeo = new THREE.PlaneGeometry(0.2, 1000);
        const lineMat = new THREE.MeshBasicMaterial({ color: 0xffffff });
        const line = new THREE.Mesh(lineGeo, lineMat);
        line.rotation.x = -Math.PI / 2;
        line.position.y = 0.01;
        scene.add(line);

        // --- NIEVE (SIN CUADRICULADO) ---
        function createSnowSide(xPos) {
            const snowGeo = new THREE.PlaneGeometry(50, 1000, 32, 32);
            const pos = snowGeo.attributes.position.array;
            for(let i = 0; i < pos.length; i+=3) {
                pos[i+2] = Math.random() * 2; // Relieve suave
            }
            const snowMat = new THREE.MeshPhongMaterial({ color: 0xffffff, flatShining: true });
            const snow = new THREE.Mesh(snowGeo, snowMat);
            snow.rotation.x = -Math.PI / 2;
            snow.position.set(xPos, -0.1, 0);
            scene.add(snow);
        }
        createSnowSide(30);  // Derecha
        createSnowSide(-30); // Izquierda

        // --- ÁRBOLES ---
        const trees = [];
        function createTree(z) {
            const treeGroup = new THREE.Group();
            const trunkGeo = new THREE.CylinderGeometry(0.2, 0.2, 1);
            const trunkMat = new THREE.MeshPhongMaterial({ color: 0x4d2600 });
            const trunk = new THREE.Mesh(trunkGeo, trunkMat);
            
            const leavesGeo = new THREE.ConeGeometry(1.2, 3, 8);
            const leavesMat = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const leaves = new THREE.Mesh(leavesGeo, leavesMat);
            leaves.position.y = 2;

            treeGroup.add(trunk);
            treeGroup.add(leaves);
            treeGroup.position.set(Math.random() > 0.5 ? 8 : -8, 0.5, z);
            scene.add(treeGroup);
            trees.push(treeGroup);
        }

        for(let i = 0; i > -200; i -= 15) createTree(i);

        // --- MOTO ---
        const bike = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.5, 2), new THREE.MeshPhongMaterial({ color: 0x111111 }));
        const neon = new THREE.Mesh(new THREE.BoxGeometry(0.65, 0.1, 1.8), new THREE.MeshBasicMaterial({ color: 0x8b5cf6 }));
        neon.position.y = 0.1;
        bike.add(body);
        bike.add(neon);
        scene.add(bike);
        bike.position.y = 0.5;

        // --- CÁMARA ---
        camera.position.set(0, 3, 7);

        // --- CONTROLES Y ANIMACIÓN ---
        let keys = {};
        window.addEventListener('keydown', (e) => keys[e.key] = true);
        window.addEventListener('keyup', (e) => keys[e.key] = false);

        let velocity = 0;
        function animate() {
            requestAnimationFrame(animate);

            if(keys["ArrowUp"]) velocity += 0.005;
            else velocity *= 0.98;
            if(velocity > 0.8) velocity = 0.8;

            if(keys["ArrowLeft"]) bike.position.x -= 0.1;
            if(keys["ArrowRight"]) bike.position.x += 0.1;

            // Mover mundo
            road.position.z += velocity * 50;
            line.position.z += velocity * 50;
            if(road
